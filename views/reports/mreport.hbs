<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Shoppings</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel='stylesheet' href='/css/font-awesome.min.css' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="/css/font-awesome-animation.min.css">
    <link rel='stylesheet' href='/css/report.css' />

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
    <script src="http://underscorejs.org/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/randomcolor/0.5.2/randomColor.min.js"></script>
    <script src="/js/custom.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-sm-12">
                <h1>
                    <i class="fa fa-shopping-cart"></i>&nbsp;Monthly Expenditure Report</h1>
                    <hr>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-2 col-sm-2">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-calendar"></i>&nbsp;Month</div>
                    <div id="monthPanel" class="panel-body">
                        {{month}}
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-sm-2">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-money"></i>&nbsp;Currency</div>
                    <div class="panel-body">
                        {{currency}}
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-sm-2">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-dollar"></i>&nbsp;Total</div>
                    <div class="panel-body">
                        {{round monthlyTotal 2}}
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-sm-2">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-dollar"></i>&nbsp;Median</div>
                    <div class="panel-body">
                        {{round monthlyMedian 2}}
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-sm-2">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-dollar"></i>&nbsp;Average</div>
                    <div class="panel-body">
                        {{round monthlyAvg 2}}
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-sm-2">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-dollar"></i>&nbsp;Max day</div>
                    <div class="panel-body">
                        {{round dayMax 2}}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 col-sm-6">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-pie-chart"></i>&nbsp;Categories</div>
                    <div class="panel-body">
                        <div class="">
                            <canvas id='categoriesChart' data-currency="{{currency}}" data-dataset="{{json categoriesChart}}"></canvas>
                        </div>
                        <br>
                        <div class="">
                            <table class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td>
                                            <h1 id="categories1v">{{categoriesChart10.0._id.value}}</h1>
                                        </td>
                                        <td>
                                            <h1 id="categories1t">{{round categoriesChart10.0.total 2}}</h1>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h2 id="categories2v">{{categoriesChart10.1._id.value}}</h2>
                                        </td>
                                        <td>
                                            <h2 id="categories2t">{{round categoriesChart10.1.total 2}}</h2>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h3 id="categories3v">{{categoriesChart10.2._id.value}}</h3>
                                        </td>
                                        <td>
                                            <h3 id="categories3t">{{round categoriesChart10.2.total 2}}</h3>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td id="categories4v">
                                            {{categoriesChart10.3._id.value}}
                                        </td>
                                        <td id="categories4t">{{round categoriesChart10.3.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="categories5v">
                                            {{categoriesChart10.4._id.value}}
                                        </td>
                                        <td id="categories5t">{{round categoriesChart10.4.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="categories6v">
                                            {{categoriesChart10.5._id.value}}
                                        </td>
                                        <td id="categories6t">{{round categoriesChart10.5.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="categories7v">
                                            {{categoriesChart10.6._id.value}}
                                        </td>
                                        <td id="categories7t">{{round categoriesChart10.6.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="categories8v">
                                            {{categoriesChart10.7._id.value}}
                                        </td>
                                        <td id="categories8t">{{round categoriesChart10.7.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="categories9v">
                                            {{categoriesChart10.8._id.value}}
                                        </td>
                                        <td id="categories9t">{{round categoriesChart10.8.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="categories10v">
                                            {{categoriesChart10.9._id.value}}
                                        </td>
                                        <td id="categories10t">{{round categoriesChart10.9.total 2}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-sm-6">
                <div class="">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-pie-chart"></i>&nbsp;Reasons</div>
                    <div class="panel-body">
                        <div class="">
                            <canvas id='reasonsChart' data-currency="{{currency}}" data-dataset="{{json reasonsChart}}"></canvas>
                        </div>
                        <br>
                        <div class="">
                            <table class="table table-striped">
                                <tbody>
                                    <tr>
                                        <td>
                                            <h1 id="reasons1v">{{reasonsChart10.0._id.value}}</h1>
                                        </td>
                                        <td>
                                            <h1 id="reasons1t">{{round reasonsChart10.0.total 2}}</h1>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h2 id="reasons2v">{{reasonsChart10.1._id.value}}</h2>
                                        </td>
                                        <td>
                                            <h2 id="reasons2t">{{round reasonsChart10.1.total 2}}</h2>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h3 id="reasons3v">{{reasonsChart10.2._id.value}}</h3>
                                        </td>
                                        <td>
                                            <h3 id="reasons3st">{{round reasonsChart10.2.total 2}}</h3>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td id="reasons4v">
                                            {{reasonsChart10.3._id.value}}
                                        </td>
                                        <td id="reasons4t">{{round reasonsChart10.3.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="reasons5v">
                                            {{reasonsChart10.4._id.value}}
                                        </td>
                                        <td id="reasons5t">{{round reasonsChart10.4.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="reasons6v">
                                            {{reasonsChart10.5._id.value}}
                                        </td>
                                        <td id="reasons6t">{{round reasonsChart10.5.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="reasons7t">
                                            {{reasonsChart10.6._id.value}}
                                        </td>
                                        <td id="reasons7v">{{round reasonsChart10.6.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="reasons8v">
                                            {{reasonsChart10.7._id.value}}
                                        </td>
                                        <td id="reasons8t">{{round reasonsChart10.7.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="reasons9v">
                                            {{reasonsChart10.8._id.value}}
                                        </td>
                                        <td id="reasons9t">{{round reasonsChart10.8.total 2}}</td>
                                    </tr>
                                    <tr>
                                        <td id="reasons10v">
                                            {{reasonsChart10.9._id.value}}
                                        </td>
                                        <td id="reasons10t">{{round reasonsChart10.9.total 2}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row break">
            <div class="col-lg-6 col-sm-6">
                <div class="panel">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-bar-chart"></i>&nbsp;Top 10 addresses by expenditure</div>
                    <div class="panel-body">
                        <div>
                            <canvas id='addressesChart' data-currency="{{currency}}" data-dataset="{{json topAddresses}}"></canvas>
                        </div>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Address</th>
                                    <th>Expenditure</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#topAddresses}}
                                <tr>
                                    <td>
                                        {{_id.value.0.name}}, {{_id.value.0.address}}, {{_id.value.0.region}}, {{_id.value.0.country}}
                                    </td>
                                    <td>{{round this.total 2}}</td>
                                </tr>
                                {{/topAddresses}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-sm-6">
                <div class="panel">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-bar-chart"></i>&nbsp;Top 10 most expensive items</div>
                    <div class="panel-body">
                        <div>
                            <canvas id='itemsChart' data-currency="{{currency}}" data-dataset="{{json topItems}}"></canvas>
                        </div>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Cost</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#topItems}}
                                <tr>
                                    <td>{{product}}</td>
                                    <td>{{totalItemCost}}</td>
                                </tr>
                                {{/topItems}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 col-sm-12">
                <div class="panel">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-bar-chart"></i>&nbsp;Daily expenses</div>
                    <div class="panel-body">
                        <canvas height="500px" id='timelineChart' data-max={{dayMax}} data-currency="{{currency}}" data-dataset="{{json dailyTotal}}"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="row break">
            <div class="col-lg-12 col-sm-12">
                <div class="panel">
                    <div class="panel-heading bg-dark">
                        <i class="fa fa-list"></i>&nbsp;Item list</div>
                    <div class="panel-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Brand</th>
                                    <th class="hidden-sm hidden-xs">UPP</th>
                                    <th class="hidden-sm hidden-xs">Weight</th>
                                    <th class="hidden-xs">Items</th>
                                    <th class="hidden-sm hidden-xs">Unit</th>
                                    <th class="hidden-xs">Item Cost</th>
                                    <th>Total Cost</th>
                                    <th class="hidden-xs">Address</th>
                                    <th class="hidden-md hidden-sm hidden-xs">Type</th>
                                    <th class="hidden-xs">Category</th>
                                    <th class="hidden-xs">Prom</th>
                                    <th class="hidden-xs">Good</th>
                                    <th class="hidden-xs">Monthly</th>
                                </tr>
                            </thead>
                            <tbody id="modal-row-container">
                                {{#items}}
                                <tr id="{{_id}}">
                                    <td class="fs80">{{#if date}} {{dateFormat date "DD" true}} {{/if}}
                                    </td>
                                    <td class="fs80">{{product}}</td>
                                    <td class="fs80">
                                        {{brand.name}}
                                    </td>
                                    <td class="fs80 hidden-sm hidden-xs">{{upp}}</td>
                                    <td class="fs80 hidden-sm hidden-xs">{{weight}}</td>
                                    <td class="fs80 hidden-sm hidden-xs">{{unit}}</td>
                                    <td class="fs80 hidden-xs">{{units_bought}}</td>
                                    <td class="fs80 hidden-xs">{{round item_cost 2}}</td>
                                    <td class="fs80">{{totalItemCost}}</td>
                                    <td class="fs80 hidden-xs">
                                        {{address.fullAddress}}
                                    </td>
                                    <td class="fs80 hidden-md hidden-sm hidden-xs">{{type}}</td>
                                    <td class="fs80 hidden-xs">{{category}}</td>
                                    <td class="fs80 hidden-xs">{{#if promotion}}
                                        <i class="fa fa-circle"></i>
                                        {{else}}
                                        <i class="fa fa-circle-o"></i>
                                        {{/if}}</td>
                                    <td class="fs80 hidden-xs">
                                        {{#if good_buy}}
                                        <i class="fa fa-circle"></i>
                                        {{else}}
                                        <i class="fa fa-circle-o"></i>
                                        {{/if}}
                                    </td>
                                    <td class="fs80 hidden-xs">{{monthly}}</td>
                                    </td>
                                </tr>
                                {{/items}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>
<script type="text/javascript">

    pieChart("categoriesChart", $("#categoriesChart").data("dataset"), $("#categoriesChart").data("currency"));
    pieChart("reasonsChart", $("#reasonsChart").data("dataset"), $("#reasonsChart").data("currency"));
    barChart("timelineChart", $("#timelineChart").data("dataset"), $("#timelineChart").data("currency"), $("#timelineChart").data("max"));
    hBarChartAddress("addressesChart", $("#addressesChart").data("dataset"), $("#addressesChart").data("currency"));
    hBarChartItems("itemsChart", $("#itemsChart").data("dataset"), $("#itemsChart").data("currency"));


    var shoppingCart = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAABp1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk7Y+rAAAAjHRSTlMAAQIDBAUGBwgJCgsMDhAREhMUFRcaHB0eHyAiIyQmKSorLS4vMDQ1Njc4OTs8PT4/QEFDRUZHSUpLTE1OT1BRUlRWV1hZW11eX2JjZGZnaGlsbW9xc3V3eXx+f4WGiIuMjo+RkpSVl5ibnqCmq62vsLK0tbm6vL7DxcjO0dPX2dre5unr7e/z9fn7/aM7NoQAAAKTSURBVGje7dj7W0xBGAfw2UvWOrUpEiklcll3SiEpG9a13LIkW6yNsksJK1tRRJo/2g+mdeY5s807e97zPjz2+/PMfJ4z1zPDWDnl/Otpig/KudyATfhecmeSyMhFrkobLjKvRN7jIstKhG9ARcbUCO7YW+pPOYPbX9aoihnxdNV84riZ61UgDzh2xp1IFB3hTQ6kGh+JO7eZn+jIoLO/XlMgVymQZgokTIGwJQrkOQVylgLZRoEEKBCWp0ASFMghCqSaAsHeiJUIm6JArlEgLRRImAJh3yiQNAXSTYHUUyBBCoTNUSAPKZDDFMhmCsS3SoCwtxTIDUQkXgzZjYi0FkM24Rk540cE86SDxZEXbhv/kUsNtLdsCax31e4ptfHPrxJ9++srA5D7/HbDtpffJa+f3FVj9iYD3IhX8xP3u9vqLH9pTxPz6za+OPX4ypHGSIXL949hVdsrs+O3O1u3hn1IjyxH7Y1/yTyKRXdUBRlyakT72ebakI95lLWNOMu8zIwYBk+RW6K/Kr1ETgmkwUskT/Alx4TxwUPDvyiQvR4i59fWYdeJknLQAqySr65Pq5gWOYBwJu7RIRkEZEaHYJzu33UIxoVOO/njCEhUO7vcv9/dBSyUus5RzjnnkxfM8vtdebijFrQcL4knliGTI8ufFH9dp0HF/1yzp+G/IsHZQq0EoPiArXdTYCRrq3VOW7pKGsNGoCHtEyshXfE7EjIJRHJSrT5d8QX5PxE29hXyHJ423FY2gpCIXGnpr0BIukse+ImSBr7XbArvBCL7pCmsv6vctBV/Cl6M9rOuC1D+WaH0G4Nt5WOh1hCoQkxskPeMNsgRcSq2AyuEOsayqR6LmSXSn848Oe72ClZOOf9dfgER83h8FqHwqgAAAABJRU5ErkJggg==";

</script>

</html>